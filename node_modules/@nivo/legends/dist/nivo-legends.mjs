import{jsx as t,jsxs as e}from"react/jsx-runtime";import{scaleLinear as i}from"d3-scale";import{getValueFormatter as n,degreesToRadians as o}from"@nivo/core";import{computeContinuousColorScaleColorStops as r}from"@nivo/colors";import*as l from"react";import{Fragment as a,useState as c,useCallback as d,useMemo as s}from"react";import{useTheme as h}from"@nivo/theming";import{Text as g,setCanvasFont as m,drawCanvasText as f}from"@nivo/text";var v=function(e){var i=e.x,n=e.y,o=e.size,r=e.fill,l=e.opacity,a=void 0===l?1:l,c=e.borderWidth,d=void 0===c?0:c,s=e.borderColor;return t("circle",{r:o/2,cx:i+o/2,cy:n+o/2,fill:r,opacity:a,strokeWidth:d,stroke:void 0===s?"transparent":s,style:{pointerEvents:"none"}})},u=function(e){var i=e.x,n=e.y,o=e.size,r=e.fill,l=e.opacity,a=void 0===l?1:l,c=e.borderWidth,d=void 0===c?0:c,s=e.borderColor;return t("g",{transform:"translate("+i+","+n+")",children:t("path",{d:"\n                    M"+o/2+" 0\n                    L"+.8*o+" "+o/2+"\n                    L"+o/2+" "+o+"\n                    L"+.2*o+" "+o/2+"\n                    L"+o/2+" 0\n                ",fill:r,opacity:a,strokeWidth:d,stroke:void 0===s?"transparent":s,style:{pointerEvents:"none"}})})},p=function(e){var i=e.x,n=e.y,o=e.size,r=e.fill,l=e.opacity,a=void 0===l?1:l,c=e.borderWidth,d=void 0===c?0:c,s=e.borderColor;return t("rect",{x:i,y:n,fill:r,opacity:a,strokeWidth:d,stroke:void 0===s?"transparent":s,width:o,height:o,style:{pointerEvents:"none"}})},y=function(e){var i=e.x,n=e.y,o=e.size,r=e.fill,l=e.opacity,a=void 0===l?1:l,c=e.borderWidth,d=void 0===c?0:c,s=e.borderColor;return t("g",{transform:"translate("+i+","+n+")",children:t("path",{d:"\n                M"+o/2+" 0\n                L"+o+" "+o+"\n                L0 "+o+"\n                L"+o/2+" 0\n            ",fill:r,opacity:a,strokeWidth:d,stroke:void 0===s?"transparent":s,style:{pointerEvents:"none"}})})};function k(){return k=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)({}).hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},k.apply(null,arguments)}var b={length:200,thickness:16,direction:"row",tickPosition:"after",tickSize:4,tickSpacing:3,tickOverlap:!1,tickFormat:function(t){return""+t},titleAlign:"start",titleOffset:4},x={top:0,right:0,bottom:0,left:0},S=function(t){var e,i=t.direction,n=t.itemsSpacing,o=t.padding,r=t.itemCount,l=t.itemWidth,a=t.itemHeight;if("number"!=typeof o&&("object"!=typeof(e=o)||Array.isArray(e)||null===e))throw new Error("Invalid property padding, must be one of: number, object");var c="number"==typeof o?{top:o,right:o,bottom:o,left:o}:k({},x,o),d=c.left+c.right,s=c.top+c.bottom,h=l+d,g=a+s,m=(r-1)*n;return"row"===i?h=l*r+m+d:"column"===i&&(g=a*r+m+s),{width:h,height:g,padding:c}},A=function(t){var e=t.anchor,i=t.translateX,n=t.translateY,o=t.containerWidth,r=t.containerHeight,l=t.width,a=t.height,c=i,d=n;switch(e){case"top":c+=(o-l)/2;break;case"top-right":c+=o-l;break;case"right":c+=o-l,d+=(r-a)/2;break;case"bottom-right":c+=o-l,d+=r-a;break;case"bottom":c+=(o-l)/2,d+=r-a;break;case"bottom-left":d+=r-a;break;case"left":d+=(r-a)/2;break;case"center":c+=(o-l)/2,d+=(r-a)/2}return{x:c,y:d}},C=function(t){var e,i,n,o,r,l,a=t.direction,c=t.justify,d=t.symbolSize,s=t.symbolSpacing,h=t.width,g=t.height;switch(a){case"left-to-right":e=0,i=(g-d)/2,o=g/2,l="central",c?(n=h,r="end"):(n=d+s,r="start");break;case"right-to-left":e=h-d,i=(g-d)/2,o=g/2,l="central",c?(n=0,r="start"):(n=h-d-s,r="end");break;case"top-to-bottom":e=(h-d)/2,i=0,n=h/2,r="middle",c?(o=g,l="alphabetic"):(o=d+s,l="text-before-edge");break;case"bottom-to-top":e=(h-d)/2,i=g-d,n=h/2,r="middle",c?(o=0,l="text-before-edge"):(o=g-d-s,l="alphabetic")}return{symbolX:e,symbolY:i,labelX:n,labelY:o,labelAnchor:r,labelAlignment:l}},W=function(t){var e,o=t.scale,l=t.ticks,a=t.length,c=void 0===a?b.length:a,d=t.thickness,s=void 0===d?b.thickness:d,h=t.direction,g=void 0===h?b.direction:h,m=t.tickPosition,f=void 0===m?b.tickPosition:m,v=t.tickSize,u=void 0===v?b.tickSize:v,p=t.tickSpacing,y=void 0===p?b.tickSpacing:p,k=t.tickOverlap,x=void 0===k?b.tickOverlap:k,S=t.tickFormat,A=void 0===S?b.tickFormat:S,C=t.title,W=t.titleAlign,z=void 0===W?b.titleAlign:W,w=t.titleOffset,X=void 0===w?b.titleOffset:w,Y="column"===g?[].concat(o.domain()).reverse():o.domain(),O=i().domain(Y);2===Y.length?O.range([0,c]):3===Y.length&&O.range([0,c/2,c]),e="thresholds"in o?[Y[0]].concat(o.thresholds(),[Y[1]]):Array.isArray(l)?l:o.ticks(l);var B,H,E,j,L,M,P=r(o,32),F=n(A),T=[],V=0,R=0;if("row"===g){var D,q,G;B=c,H=s,R=1;var I;L=0,E="start"===z?0:"middle"===z?c/2:c,"before"===f?(D=-u,q=x?s:0,G=-u-y,I="alphabetic",j=s+X,M="hanging"):(D=x?0:s,G=(q=s+u)+y,I="hanging",j=-X,M="alphabetic"),e.forEach((function(t){var e=O(t);T.push({x1:e,y1:D,x2:e,y2:q,text:F(t),textX:e,textY:G,textHorizontalAlign:"middle",textVerticalAlign:I})}))}else{var _,J,K,N;B=s,H=c,V=1;L=-90,j="start"===z?c:"middle"===z?c/2:0,"before"===f?(J=x?s:0,K=(_=-u)-y,N="end",E=s+X,M="hanging"):(_=x?0:s,K=(J=s+u)+y,N="start",E=-X,M="alphabetic"),e.forEach((function(t){var e=O(t);T.push({x1:_,y1:e,x2:J,y2:e,text:F(t),textX:K,textY:e,textHorizontalAlign:N,textVerticalAlign:"central"})}))}return{width:B,height:H,gradientX1:0,gradientY1:V,gradientX2:R,gradientY2:0,colorStops:P,ticks:T,titleText:C,titleX:E,titleY:j,titleRotation:L,titleHorizontalAlign:z,titleVerticalAlign:M}},z=function(i){var n=i.scale,o=i.ticks,r=i.length,l=void 0===r?b.length:r,c=i.thickness,d=void 0===c?b.thickness:c,s=i.direction,m=void 0===s?b.direction:s,f=i.tickPosition,v=void 0===f?b.tickPosition:f,u=i.tickSize,p=void 0===u?b.tickSize:u,y=i.tickSpacing,k=void 0===y?b.tickSpacing:y,x=i.tickOverlap,S=void 0===x?b.tickOverlap:x,A=i.tickFormat,C=void 0===A?b.tickFormat:A,z=i.title,w=i.titleAlign,X=void 0===w?b.titleAlign:w,Y=i.titleOffset,O=W({scale:n,ticks:o,length:l,thickness:d,direction:m,tickPosition:v,tickSize:p,tickSpacing:k,tickOverlap:S,tickFormat:C,title:z,titleAlign:X,titleOffset:void 0===Y?b.titleOffset:Y}),B=O.width,H=O.height,E=O.gradientX1,j=O.gradientY1,L=O.gradientX2,M=O.gradientY2,P=O.ticks,F=O.colorStops,T=O.titleText,V=O.titleX,R=O.titleY,D=O.titleRotation,q=O.titleVerticalAlign,G=O.titleHorizontalAlign,I=h(),_="ContinuousColorsLegendSvgGradient."+m+"."+F.map((function(t){return t.stopColor.replace(/[(),\s]/g,"")+"."+t.offset})).join("_");return e("g",{children:[t("defs",{children:t("linearGradient",{id:_,x1:E,y1:j,x2:L,y2:M,children:F.map((function(e){return t("stop",{offset:e.offset,stopColor:e.stopColor},e.key)}))})}),T&&t("text",{transform:"translate("+V+", "+R+") rotate("+D+")",textAnchor:G,dominantBaseline:q,style:I.legends.title.text,children:T}),t("rect",{width:B,height:H,fill:"url(#"+_}),P.map((function(i,n){return e(a,{children:[t("line",{x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,style:I.legends.ticks.line}),t(g,{x:i.textX,y:i.textY,textAnchor:i.textHorizontalAlign,dominantBaseline:i.textVerticalAlign,style:I.legends.ticks.text,children:i.text})]},n)}))]})},w=["containerWidth","containerHeight","anchor","translateX","translateY","length","thickness","direction"],X=function(e){var i,n,o=e.containerWidth,r=e.containerHeight,l=e.anchor,a=e.translateX,c=void 0===a?0:a,d=e.translateY,s=void 0===d?0:d,h=e.length,g=void 0===h?b.length:h,m=e.thickness,f=void 0===m?b.thickness:m,v=e.direction,u=void 0===v?b.direction:v,p=function(t,e){if(null==t)return{};var i={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;i[n]=t[n]}return i}(e,w);"row"===u?(i=g,n=f):(i=f,n=g);var y=A({anchor:l,translateX:c,translateY:s,containerWidth:o,containerHeight:r,width:i,height:n}),x=y.x,S=y.y;return t("g",{transform:"translate("+x+", "+S+")",children:t(z,k({length:g,thickness:f,direction:u},p))})},Y={circle:v,diamond:u,square:p,triangle:y},O=function(i){var n,o,r,a,s,m,f,v,u,p,y,b=i.x,x=i.y,S=i.width,A=i.height,W=i.data,z=i.direction,w=void 0===z?"left-to-right":z,X=i.justify,O=void 0!==X&&X,B=i.textColor,H=i.background,E=void 0===H?"transparent":H,j=i.opacity,L=void 0===j?1:j,M=i.symbolShape,P=void 0===M?"square":M,F=i.symbolSize,T=void 0===F?16:F,V=i.symbolSpacing,R=void 0===V?8:V,D=i.symbolBorderWidth,q=void 0===D?0:D,G=i.symbolBorderColor,I=void 0===G?"transparent":G,_=i.onClick,J=i.onMouseEnter,K=i.onMouseLeave,N=i.toggleSerie,Q=i.effects,U=c({}),Z=U[0],$=U[1],tt=h(),et=d((function(t){if(Q){var e=Q.filter((function(t){return"hover"===t.on})).reduce((function(t,e){return k({},t,e.style)}),{});$(e)}null==J||J(W,t)}),[J,W,Q]),it=d((function(t){if(Q){var e=Q.filter((function(t){return"hover"!==t.on})).reduce((function(t,e){return k({},t,e.style)}),{});$(e)}null==K||K(W,t)}),[K,W,Q]),nt=C({direction:w,justify:O,symbolSize:null!=(n=Z.symbolSize)?n:T,symbolSpacing:R,width:S,height:A}),ot=nt.symbolX,rt=nt.symbolY,lt=nt.labelX,at=nt.labelY,ct=nt.labelAnchor,dt=nt.labelAlignment,st=[_,J,K,N].some((function(t){return void 0!==t})),ht="function"==typeof P?P:Y[P];return e("g",{transform:"translate("+b+","+x+")",style:{opacity:null!=(o=Z.itemOpacity)?o:L},children:[t("rect",{width:S,height:A,fill:null!=(r=Z.itemBackground)?r:E,style:{cursor:st?"pointer":"auto"},onClick:function(t){null==_||_(W,t),null==N||N(W.id)},onMouseEnter:et,onMouseLeave:it}),l.createElement(ht,k({id:W.id,x:ot,y:rt,size:null!=(a=Z.symbolSize)?a:T,fill:null!=(s=null!=(m=W.fill)?m:W.color)?s:"black",borderWidth:null!=(f=Z.symbolBorderWidth)?f:q,borderColor:null!=(v=Z.symbolBorderColor)?v:I},W.hidden?tt.legends.hidden.symbol:void 0)),t(g,{textAnchor:ct,style:k({},tt.legends.text,{fill:null!=(u=null!=(p=null!=(y=Z.itemTextColor)?y:B)?p:tt.legends.text.fill)?u:"black",dominantBaseline:dt,pointerEvents:"none",userSelect:"none"},W.hidden?tt.legends.hidden.text:void 0),x:lt,y:at,children:W.label})]})},B=function(e){var i=e.data,n=e.x,o=e.y,r=e.direction,l=e.padding,a=void 0===l?0:l,c=e.justify,d=e.effects,s=e.itemWidth,h=e.itemHeight,g=e.itemDirection,m=void 0===g?"left-to-right":g,f=e.itemsSpacing,v=void 0===f?0:f,u=e.itemTextColor,p=e.itemBackground,y=void 0===p?"transparent":p,k=e.itemOpacity,b=void 0===k?1:k,x=e.symbolShape,A=e.symbolSize,C=e.symbolSpacing,W=e.symbolBorderWidth,z=e.symbolBorderColor,w=e.onClick,X=e.onMouseEnter,Y=e.onMouseLeave,B=e.toggleSerie,H=S({itemCount:i.length,itemWidth:s,itemHeight:h,itemsSpacing:v,direction:r,padding:a}).padding,E="row"===r?s+v:0,j="column"===r?h+v:0;return t("g",{transform:"translate("+n+","+o+")",children:i.map((function(e,i){return t(O,{data:e,x:i*E+H.left,y:i*j+H.top,width:s,height:h,direction:m,justify:c,effects:d,textColor:u,background:y,opacity:b,symbolShape:x,symbolSize:A,symbolSpacing:C,symbolBorderWidth:W,symbolBorderColor:z,onClick:w,onMouseEnter:X,onMouseLeave:Y,toggleSerie:B},i)}))})},H=function(e){var i=e.data,n=e.containerWidth,o=e.containerHeight,r=e.translateX,l=void 0===r?0:r,a=e.translateY,c=void 0===a?0:a,d=e.anchor,s=e.direction,h=e.padding,g=void 0===h?0:h,m=e.justify,f=e.itemsSpacing,v=void 0===f?0:f,u=e.itemWidth,p=e.itemHeight,y=e.itemDirection,k=e.itemTextColor,b=e.itemBackground,x=e.itemOpacity,C=e.symbolShape,W=e.symbolSize,z=e.symbolSpacing,w=e.symbolBorderWidth,X=e.symbolBorderColor,Y=e.onClick,O=e.onMouseEnter,H=e.onMouseLeave,E=e.toggleSerie,j=e.effects,L=S({itemCount:i.length,itemsSpacing:v,itemWidth:u,itemHeight:p,direction:s,padding:g}),M=L.width,P=L.height,F=A({anchor:d,translateX:l,translateY:c,containerWidth:n,containerHeight:o,width:M,height:P}),T=F.x,V=F.y;return t(B,{data:i,x:T,y:V,direction:s,padding:g,justify:m,effects:j,itemsSpacing:v,itemWidth:u,itemHeight:p,itemDirection:y,itemTextColor:k,itemBackground:b,itemOpacity:x,symbolShape:C,symbolSize:W,symbolSpacing:z,symbolBorderWidth:w,symbolBorderColor:X,onClick:Y,onMouseEnter:O,onMouseLeave:H,toggleSerie:"boolean"==typeof E?void 0:E})},E={start:"left",middle:"center",end:"right"},j=function(t,e){var i=e.data,n=e.containerWidth,o=e.containerHeight,r=e.translateX,l=void 0===r?0:r,a=e.translateY,c=void 0===a?0:a,d=e.anchor,s=e.direction,h=e.padding,g=void 0===h?0:h,v=e.justify,u=void 0!==v&&v,p=e.itemsSpacing,y=void 0===p?0:p,b=e.itemWidth,x=e.itemHeight,W=e.itemDirection,z=void 0===W?"left-to-right":W,w=e.itemTextColor,X=e.symbolSize,Y=void 0===X?16:X,O=e.symbolSpacing,B=void 0===O?8:O,H=e.theme,j=S({itemCount:i.length,itemWidth:b,itemHeight:x,itemsSpacing:y,direction:s,padding:g}),L=j.width,M=j.height,P=j.padding,F=A({anchor:d,translateX:l,translateY:c,containerWidth:n,containerHeight:o,width:L,height:M}),T=F.x,V=F.y,R="row"===s?b+y:0,D="column"===s?x+y:0;t.save(),t.translate(T,V),m(t,H.legends.text),i.forEach((function(e,i){var n,o=i*R+P.left,r=i*D+P.top,l=C({direction:z,justify:u,symbolSize:Y,symbolSpacing:B,width:b,height:x}),a=l.symbolX,c=l.symbolY,d=l.labelX,s=l.labelY,h=l.labelAnchor,g=l.labelAlignment;t.fillStyle=null!=(n=e.color)?n:"black",t.fillRect(o+a,r+c,Y,Y),t.textAlign=E[h],"central"===g&&(t.textBaseline="middle"),f(t,k({},H.legends.text,{fill:null!=w?w:H.legends.text.fill}),String(e.label),o+d,r+s)})),t.restore()},L=function(t,e){var i,n=e.containerWidth,r=e.containerHeight,l=e.anchor,a=e.translateX,c=void 0===a?0:a,d=e.translateY,s=void 0===d?0:d,h=e.scale,g=e.length,v=void 0===g?b.length:g,u=e.thickness,p=void 0===u?b.thickness:u,y=e.direction,k=void 0===y?b.direction:y,x=e.ticks,S=e.tickPosition,C=void 0===S?b.tickPosition:S,z=e.tickSize,w=void 0===z?b.tickSize:z,X=e.tickSpacing,Y=void 0===X?b.tickSpacing:X,O=e.tickOverlap,B=void 0===O?b.tickOverlap:O,H=e.tickFormat,E=void 0===H?b.tickFormat:H,j=e.title,L=e.titleAlign,M=void 0===L?b.titleAlign:L,P=e.titleOffset,F=void 0===P?b.titleOffset:P,T=e.theme,V=W({scale:h,ticks:x,length:v,thickness:p,direction:k,tickPosition:C,tickSize:w,tickSpacing:Y,tickOverlap:B,tickFormat:E,title:j,titleAlign:M,titleOffset:F}),R=V.width,D=V.height,q=V.gradientX1,G=V.gradientY1,I=V.gradientX2,_=V.gradientY2,J=V.colorStops,K=V.ticks,N=V.titleText,Q=V.titleX,U=V.titleY,Z=V.titleRotation,$=V.titleVerticalAlign,tt=V.titleHorizontalAlign,et=A({anchor:l,translateX:c,translateY:s,containerWidth:n,containerHeight:r,width:R,height:D}),it=et.x,nt=et.y,ot={font:t.font,textAlign:t.textAlign,textBaseline:t.textBaseline};t.save(),t.translate(it,nt);var rt=t.createLinearGradient(q*R,G*D,I*R,_*D);J.forEach((function(t){rt.addColorStop(t.offset,t.stopColor)})),t.fillStyle=rt,t.fillRect(0,0,R,D),m(t,T.legends.ticks.text);var lt=null!=(i=T.legends.ticks.line.strokeWidth)?i:0,at="string"!=typeof lt&&lt>0;K.forEach((function(e){at&&(t.lineWidth=lt,T.axis.ticks.line.stroke&&(t.strokeStyle=T.axis.ticks.line.stroke),t.lineCap="square",t.beginPath(),t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.stroke()),t.textAlign="middle"===e.textHorizontalAlign?"center":e.textHorizontalAlign,t.textBaseline="central"===e.textVerticalAlign?"middle":e.textVerticalAlign,f(t,T.legends.ticks.text,e.text,e.textX,e.textY)})),N&&(t.save(),t.translate(Q,U),t.rotate(o(Z)),m(t,T.legends.title.text),t.textAlign="middle"===tt?"center":tt,t.textBaseline=$,f(t,T.legends.title.text,N),t.restore()),t.restore(),t.font=ot.font,t.textAlign=ot.textAlign,t.textBaseline=ot.textBaseline},M=function(t){var e=t.scale,i=t.domain,n=t.reverse,o=void 0!==n&&n,r=t.valueFormat,l=void 0===r?function(t){return t}:r,a=t.separator,c=void 0===a?" - ":a;return s((function(){var t=(null!=i?i:e.range()).map((function(t,i){var n=e.invertExtent(t),o=n[0],r=n[1];return{id:t,index:i,extent:[o,r],label:""+l(o)+c+l(r),value:e(o),color:t}}));return o&&t.reverse(),t}),[i,e,o,c,l])};export{X as AnchoredContinuousColorsLegendSvg,H as BoxLegendSvg,z as ContinuousColorsLegendSvg,B as LegendSvg,O as LegendSvgItem,v as SymbolCircle,u as SymbolDiamond,p as SymbolSquare,y as SymbolTriangle,W as computeContinuousColorsLegend,S as computeDimensions,C as computeItemLayout,A as computePositionFromAnchor,b as continuousColorsLegendDefaults,L as renderContinuousColorLegendToCanvas,j as renderLegendToCanvas,M as useQuantizeColorScaleLegendData};
//# sourceMappingURL=nivo-legends.mjs.map
