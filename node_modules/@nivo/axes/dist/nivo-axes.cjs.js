"use strict";var e=require("react"),t=require("@nivo/core"),n=require("@nivo/theming"),i=require("@nivo/text"),r=require("@react-spring/web"),a=require("d3-time-format"),o=require("d3-format"),s=require("@nivo/scales"),l=require("react/jsx-runtime");function c(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var u=c(e);function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},x.apply(null,arguments)}var d=function(e){var n,i=e.axis,r=e.scale,a=e.ticksPosition,o=e.tickValues,l=e.tickSize,c=e.tickPadding,u=e.tickRotation,d=e.truncateTickAt,f=e.engine,m=void 0===f?"svg":f,y=s.getScaleTicks(r,o),v=t.textPropsByEngine[m],g="bandwidth"in r?s.centerScale(r):r,h={lineX:0,lineY:0},k={textX:0,textY:0},p="object"==typeof document&&"rtl"===document.dir,b=v.align.center,T=v.baseline.center;"x"===i?(n=function(e){var t;return{x:null!=(t=g(e))?t:0,y:0}},h.lineY=l*("after"===a?1:-1),k.textY=(l+c)*("after"===a?1:-1),T="after"===a?v.baseline.top:v.baseline.bottom,0===u?b=v.align.center:"after"===a&&u<0||"before"===a&&u>0?(b=v.align[p?"left":"right"],T=v.baseline.center):("after"===a&&u>0||"before"===a&&u<0)&&(b=v.align[p?"right":"left"],T=v.baseline.center)):(n=function(e){var t;return{x:0,y:null!=(t=g(e))?t:0}},h.lineX=l*("after"===a?1:-1),k.textX=(l+c)*("after"===a?1:-1),b="after"===a?v.align.left:v.align.right);return{ticks:y.map((function(e){var t="string"==typeof e?function(e){var t=String(e).length;return d&&d>0&&t>d?""+String(e).slice(0,d).concat("..."):""+e}(e):e;return x({key:e instanceof Date?""+e.valueOf():""+e,value:t},n(e),h,k)})),textAlign:b,textBaseline:T}},f=function(e,t){if(void 0===e||"function"==typeof e)return e;if("time"===t.type){var n=a.timeFormat(e);return function(e){return n(e instanceof Date?e:new Date(e))}}return o.format(e)},m=function(e){var t,n=e.width,i=e.height,r=e.scale,a=e.axis,o=e.values,l=(t=o,Array.isArray(t)?o:void 0)||s.getScaleTicks(r,o),c="bandwidth"in r?s.centerScale(r):r,u="x"===a?l.map((function(e){var t,n;return{key:e instanceof Date?""+e.valueOf():""+e,x1:null!=(t=c(e))?t:0,x2:null!=(n=c(e))?n:0,y1:0,y2:i}})):l.map((function(e){var t,i;return{key:e instanceof Date?""+e.valueOf():""+e,x1:0,x2:n,y1:null!=(t=c(e))?t:0,y2:null!=(i=c(e))?i:0}}));return u},y=e.memo((function(t){var n,a=t.value,o=t.format,s=t.lineX,c=t.lineY,u=t.onClick,d=t.textBaseline,f=t.textAnchor,m=t.theme,y=t.animatedProps,v=null!=(n=null==o?void 0:o(a))?n:a,g=e.useMemo((function(){var e={opacity:y.opacity};return u?{style:x({},e,{cursor:"pointer"}),onClick:function(e){return u(e,v)}}:{style:e}}),[y.opacity,u,v]);return l.jsxs(r.animated.g,x({transform:y.transform},g,{children:[l.jsx("line",{x1:0,x2:s,y1:0,y2:c,style:m.line}),l.jsx(i.Text,{dominantBaseline:d,textAnchor:f,transform:y.textTransform,style:m.text,children:""+v})]}))})),v=function(a){var o=a.axis,s=a.scale,c=a.x,m=void 0===c?0:c,v=a.y,g=void 0===v?0:v,h=a.length,k=a.ticksPosition,p=a.tickValues,b=a.tickSize,T=void 0===b?5:b,A=a.tickPadding,P=void 0===A?5:A,j=a.tickRotation,S=void 0===j?0:j,C=a.format,w=a.renderTick,O=void 0===w?y:w,q=a.truncateTickAt,X=a.legend,Y=a.legendPosition,B=void 0===Y?"end":Y,E=a.legendOffset,z=void 0===E?0:E,M=a.style,R=a.onClick,V=a.ariaHidden,D=n.useTheme(),F=n.useExtendedAxisTheme(D.axis,M),G=e.useMemo((function(){return f(C,s)}),[C,s]),W=d({axis:o,scale:s,ticksPosition:k,tickValues:p,tickSize:T,tickPadding:P,tickRotation:S,truncateTickAt:q}),L=W.ticks,H=W.textAlign,I=W.textBaseline,N=null;if(void 0!==X){var J,K=0,Q=0,U=0;"y"===o?(U=-90,K=z,"start"===B?(J="start",Q=h):"middle"===B?(J="middle",Q=h/2):"end"===B&&(J="end")):(Q=z,"start"===B?J="start":"middle"===B?(J="middle",K=h/2):"end"===B&&(J="end",K=h)),N=l.jsx(l.Fragment,{children:l.jsx(i.Text,{transform:"translate("+K+", "+Q+") rotate("+U+")",textAnchor:J,style:x({},F.legend.text,{dominantBaseline:"central"}),children:X})})}var Z=t.useMotionConfig(),$=Z.animate,_=Z.config,ee=r.useSpring({transform:"translate("+m+","+g+")",lineX2:"x"===o?h:0,lineY2:"x"===o?0:h,config:_,immediate:!$}),te=e.useCallback((function(e){return{opacity:1,transform:"translate("+e.x+","+e.y+")",textTransform:"translate("+e.textX+","+e.textY+") rotate("+S+")"}}),[S]),ne=e.useCallback((function(e){return{opacity:0,transform:"translate("+e.x+","+e.y+")",textTransform:"translate("+e.textX+","+e.textY+") rotate("+S+")"}}),[S]),ie=r.useTransition(L,{keys:function(e){return e.key},initial:te,from:ne,enter:te,update:te,leave:{opacity:0},config:_,immediate:!$});return l.jsxs(r.animated.g,{transform:ee.transform,"aria-hidden":V,children:[ie((function(e,t,n,i){return u.createElement(O,x({tickIndex:i,format:G,rotate:S,textBaseline:I,textAnchor:H,truncateTickAt:q,animatedProps:e,theme:F.ticks},t,R?{onClick:R}:{}))})),l.jsx(r.animated.line,{style:F.domain.line,x1:0,x2:ee.lineX2,y1:0,y2:ee.lineY2}),N]})},g=e.memo(v),h=["top","right","bottom","left"],k=e.memo((function(e){var t=e.xScale,n=e.yScale,i=e.width,r=e.height,a={top:e.top,right:e.right,bottom:e.bottom,left:e.left};return l.jsx(l.Fragment,{children:h.map((function(e){var o=a[e];if(!o)return null;var s="top"===e||"bottom"===e,c="top"===e||"left"===e?"before":"after";return l.jsx(g,x({},o,{axis:s?"x":"y",x:"right"===e?i:0,y:"bottom"===e?r:0,scale:s?t:n,length:s?i:r,ticksPosition:c,truncateTickAt:o.truncateTickAt}),e)}))})})),p=e.memo((function(e){var t=e.animatedProps,i=n.useTheme();return l.jsx(r.animated.line,x({},t,i.grid.line))})),b=e.memo((function(n){var i=n.lines,a=t.useMotionConfig(),o=a.animate,s=a.config,c=r.useTransition(i,{keys:function(e){return e.key},initial:function(e){return{opacity:1,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2}},from:function(e){return{opacity:0,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2}},enter:function(e){return{opacity:1,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2}},update:function(e){return{opacity:1,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2}},leave:{opacity:0},config:s,immediate:!o});return l.jsx("g",{children:c((function(t,n){return e.createElement(p,x({},n,{key:n.key,animatedProps:t}))}))})})),T=e.memo((function(t){var n=t.width,i=t.height,r=t.xScale,a=t.yScale,o=t.xValues,s=t.yValues,c=e.useMemo((function(){return!!r&&m({width:n,height:i,scale:r,axis:"x",values:o})}),[r,o,n,i]),u=e.useMemo((function(){return!!a&&m({width:n,height:i,scale:a,axis:"y",values:s})}),[i,n,a,s]);return l.jsxs(l.Fragment,{children:[c&&l.jsx(b,{lines:c}),u&&l.jsx(b,{lines:u})]})})),A=function(e,r){var a,o,s=r.axis,l=r.scale,c=r.x,u=void 0===c?0:c,x=r.y,f=void 0===x?0:x,m=r.length,y=r.ticksPosition,v=r.tickValues,g=r.tickSize,h=void 0===g?5:g,k=r.tickPadding,p=void 0===k?5:k,b=r.tickRotation,T=void 0===b?0:b,A=r.format,P=r.legend,j=r.legendPosition,S=void 0===j?"end":j,C=r.legendOffset,w=void 0===C?0:C,O=r.theme,q=r.style,X=d({axis:s,scale:l,ticksPosition:y,tickValues:v,tickSize:h,tickPadding:p,tickRotation:T,engine:"canvas"}),Y=X.ticks,B=X.textAlign,E=X.textBaseline;e.save(),e.translate(u,f);var z=n.extendAxisTheme(O.axis,q);e.textAlign=B,e.textBaseline=E,i.setCanvasFont(e,z.ticks.text);var M=null!=(a=z.domain.line.strokeWidth)?a:0;"string"!=typeof M&&M>0&&(e.lineWidth=M,e.lineCap="square",z.domain.line.stroke&&(e.strokeStyle=z.domain.line.stroke),e.beginPath(),e.moveTo(0,0),e.lineTo("x"===s?m:0,"x"===s?0:m),e.stroke());var R="function"==typeof A?A:function(e){return""+e},V=null!=(o=z.ticks.line.strokeWidth)?o:0,D="string"!=typeof V&&V>0;if(Y.forEach((function(n){D&&(e.lineWidth=V,e.lineCap="square",z.ticks.line.stroke&&(e.strokeStyle=z.ticks.line.stroke),e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(n.x+n.lineX,n.y+n.lineY),e.stroke());var r=R(n.value);e.save(),e.translate(n.x+n.textX,n.y+n.textY),e.rotate(t.degreesToRadians(T)),i.drawCanvasText(e,z.ticks.text,""+r),e.fillText(""+r,0,0),e.restore()})),void 0!==P){var F=0,G=0,W=0,L="center";"y"===s?(W=-90,F=w,"start"===S?(L="start",G=m):"middle"===S?(L="center",G=m/2):"end"===S&&(L="end")):(G=w,"start"===S?L="start":"middle"===S?(L="center",F=m/2):"end"===S&&(L="end",F=m)),e.translate(F,G),e.rotate(t.degreesToRadians(W)),i.setCanvasFont(e,z.legend.text),z.legend.text.fill&&(e.fillStyle=z.legend.text.fill),e.textAlign=L,e.textBaseline="middle",i.drawCanvasText(e,z.legend.text,P)}e.restore()};exports.Axes=k,exports.Axis=g,exports.AxisTick=y,exports.Grid=T,exports.GridLine=p,exports.GridLines=b,exports.NonMemoizedAxis=v,exports.positions=h,exports.renderAxesToCanvas=function(e,t){var n=t.xScale,i=t.yScale,r=t.width,a=t.height,o=t.top,s=t.right,l=t.bottom,c=t.left,u=t.theme,d={top:o,right:s,bottom:l,left:c};h.forEach((function(t){var o=d[t];if(!o)return null;var s="top"===t||"bottom"===t,l="top"===t||"left"===t?"before":"after",c=s?n:i,m=f(o.format,c);A(e,x({},o,{axis:s?"x":"y",x:"right"===t?r:0,y:"bottom"===t?a:0,scale:c,format:m,length:s?r:a,ticksPosition:l,theme:u}))}))},exports.renderAxisToCanvas=A,exports.renderGridLinesToCanvas=function(e,t){var n=t.width,i=t.height,r=t.scale,a=t.axis,o=t.values;m({width:n,height:i,scale:r,axis:a,values:o}).forEach((function(t){e.beginPath(),e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.stroke()}))};
//# sourceMappingURL=nivo-axes.cjs.js.map
